diff --git a/build/make/configure.sh b/build/make/configure.sh
index 679f12df7..d314a3cd8 100644
--- a/build/make/configure.sh
+++ b/build/make/configure.sh
@@ -276,12 +276,27 @@ elif test ! -z "$TEMPDIR" ; then
 else
   TMPDIRx="/tmp"
 fi
+if echo "$CC" | grep -qi "cl.exe"; then
+    TMPDIRx=$(cygpath -m "$TMPDIRx")
+fi
 RAND=$(awk 'BEGIN { srand(); printf "%d\n",(rand() * 32768)}')
+
+case "$CC" in
+    *cl.exe | *clang-cl.exe)
+        OBJEXT="obj"
+        EXEEXT="exe"
+        ;;
+    *)
+        OBJEXT="o"
+        EXEEXT="x"
+        ;;
+esac
+
 TMP_H="${TMPDIRx}/vpx-conf-$$-${RAND}.h"
 TMP_C="${TMPDIRx}/vpx-conf-$$-${RAND}.c"
 TMP_CC="${TMPDIRx}/vpx-conf-$$-${RAND}.cc"
-TMP_O="${TMPDIRx}/vpx-conf-$$-${RAND}.o"
-TMP_X="${TMPDIRx}/vpx-conf-$$-${RAND}.x"
+TMP_O="${TMPDIRx}/vpx-conf-$$-${RAND}.${OBJEXT}"
+TMP_X="${TMPDIRx}/vpx-conf-$$-${RAND}.${EXEEXT}"
 TMP_ASM="${TMPDIRx}/vpx-conf-$$-${RAND}.asm"
 
 clean_temp_files() {
@@ -344,27 +359,42 @@ EOF
 }
 
 check_cflags() {
- log check_cflags "$@"
- check_cc -Werror "$@" <<EOF
+    log check_cflags "$@"
+    case "$CC" in
+        *cl.exe | *clang-cl.exe)
+            args=$(echo "$args" | sed 's/-Werror//g')
+            check_cc /WX $args <<EOF
 int x;
 EOF
+            ;;
+        *)
+            check_cc -Werror "$@" <<EOF
+int x;
+EOF
+            ;;
+    esac
 }
 
 check_cxxflags() {
-  log check_cxxflags "$@"
+    log check_cxxflags "$@"
 
-  # Catch CFLAGS that trigger CXX warnings
-  case "$CXX" in
-    *c++-analyzer|*clang++|*g++*)
-      check_cxx -Werror "$@" <<EOF
+    case "$CXX" in
+        *c++-analyzer|*clang++|*g++*)
+            check_cxx -Werror "$@" <<EOF
 int x;
 EOF
-      ;;
-    *)
-      check_cxx -Werror "$@" <<EOF
+            ;;
+        *cl.exe | *clang-cl.exe)
+            args=$(echo "$args" | sed 's/-Werror//g')
+            check_cxx /WX $args <<EOF
 int x;
 EOF
-      ;;
+            ;;
+        *)
+            check_cxx -Werror "$@" <<EOF
+int x;
+EOF
+            ;;
     esac
 }
 
